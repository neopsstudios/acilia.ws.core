{#
    Parameters:
      * nbPages (int): number of pages
      * currentPage (int): current pages
      * url (string): route name & query (string): route parameter
        ex: list/page-5?q=myFilter (5 = page and query = myFilter)
#}

{% apply spaceless %}
    <div class="clearfix">
        {% if nbPages > 1 %}
            {# Number of page around current page+1 #}
            {% set nearbyPagesLimit = 4 %}
            <ul class="pagination float-left">

                {% if currentPage != 1 %}
                    <li><a href="{{ path(url, params|merge({'page': 1})) }}">{{ 'pagination.first'|trans({}, 'ws_cms') }}</a></li>
                {% endif %}

                {% for i in 1..nbPages %}
                    {% if 0 == (currentPage - nearbyPagesLimit) - loop.index %} {# dot before #}
                        <li class="disabled"><a href="#">...</a></li>
                    {% elseif 0 == (currentPage + nearbyPagesLimit) - loop.index %} {# dot after #}
                        <li class="disabled"><a href="#">...</a></li>
                    {% elseif 0 < (currentPage - nearbyPagesLimit) - loop.index %} {# hide all before #}
                    {% elseif 0 > (currentPage + nearbyPagesLimit) - loop.index %} {# hide all after #}
                    {% else %}
                        <li {% if currentPage == loop.index %} class="active"{% endif %}>
                            <a href="{{ path(url, params|merge({'page': loop.index})) }}">{{ loop.index }}</a>
                        </li>
                    {% endif %}
                {% endfor %}

                {% if currentPage != nbPages %}
                    <li>
                        <a href="{{ path(url, params|merge({'page': nbPages})) }}">{{ 'pagination.last'|trans({}, 'ws_cms') }}</a>
                    </li>
                {% endif %}
            </ul>
        {% endif %}

        <div class="float-right">
            {#
            Mostrando {{ ((currentPage - 1) * limit) + 1 }} a
                <span class="js-pagination_page">{{ ((currentPage - 1) * limit) + currentCount }}</span> de
                <span class="js-pagination_total">{{ totalCount }}</span> elementos.
            #}
            {{ 'pagination.info'|trans({'%count%': totalCount, '%from%': ((currentPage - 1) * limit) + 1, '%to%': ((currentPage - 1) * limit) + currentCount }, 'ws_cms') }}

        </div>
    </div>
{% endapply %}
